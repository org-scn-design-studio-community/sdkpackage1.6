/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.suite.ui.commons.SplitButton");jQuery.sap.require("sap.suite.ui.commons.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.suite.ui.commons.SplitButton",{metadata:{library:"sap.suite.ui.commons",properties:{"visible":{type:"boolean",group:"Misc",defaultValue:true},"enabled":{type:"boolean",group:"Behavior",defaultValue:true},"lite":{type:"boolean",group:"Appearance",defaultValue:false},"style":{type:"sap.ui.commons.ButtonStyle",group:"Appearance",defaultValue:sap.ui.commons.ButtonStyle.Default},"styled":{type:"boolean",group:"Appearance",defaultValue:true},"iconFirst":{type:"boolean",group:"Appearance",defaultValue:true},"text":{type:"string",group:"Appearance",defaultValue:''},"icon":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:''}},aggregations:{"menu":{type:"sap.ui.commons.Menu",multiple:false}}}});jQuery.sap.require("sap.ui.commons.Button");jQuery.sap.require("sap.ui.commons.MenuButton");jQuery.sap.require("sap.ui.commons.MenuItem");(function(){function e(M,o){if(!o||!M||M.getItems().length===0){return false;}if(M.indexOfItem(o)>=0){return true;}var I=M.getItems();var s=null;for(var i=0;i<I.length;i++){s=I[i].getSubmenu();if(e(s,o)){return true;}}return false;}function m(s){return function(){sap.ui.commons.MenuItem.prototype.setVisible.apply(s._oMenuItem,arguments);if(!s._oMenuItem.getVisible()){s.setMenu(s._oMenuButton.getMenu());}return s._oMenuItem;};}function a(s){return function(){sap.ui.commons.MenuItem.prototype.setIcon.apply(s._oMenuItem,arguments);if(!s.getIcon()){s._oDefaultActionButton.setIcon(s._oMenuItem.getIcon());}return s._oMenuItem;};}function b(s){return function(){sap.ui.commons.MenuItem.prototype.setTooltip.apply(s._oMenuItem,arguments);s._oDefaultActionButton.setTooltip(s._oMenuItem.getTooltip());return s._oMenuItem;};}var c=function(s){return function(){sap.ui.commons.MenuItem.prototype.setText.apply(s._oMenuItem,arguments);if(!s.getText()){s._oDefaultActionButton.setText(s._oMenuItem.getText());}return s._oMenuItem;};};var d=function(s){return function(){sap.ui.commons.MenuItem.prototype.setEnabled.apply(s._oMenuItem,arguments);if(s.getEnabled()){s._oDefaultActionButton.setEnabled(s._oMenuItem.getEnabled());}return s._oMenuItem;};};sap.suite.ui.commons.SplitButton.prototype.init=function(){this._oDefaultActionButton=new sap.ui.commons.Button(this.getId()+"-defaultActionButton");var t=this;this._oDefaultActionButton.attachPress(function(){if(t._oMenuItem){t._oMenuItem.fireSelect();}});this._oMenuButton=new sap.ui.commons.MenuButton(this.getId()+"-menuButton");this._oMenuButton.addStyleClass("sapSuiteUiCommonsSplitButton-menuButton");if(this.getMenu()){this._oMenuButton.setMenu(this.getMenu());}};sap.suite.ui.commons.SplitButton.prototype.exit=function(){this.destroyAggregation("menu",true);this._oDefaultActionButton.destroy();this._oDefaultActionButton=null;this._oMenuButton.destroy();this._oMenuButton=null;};sap.suite.ui.commons.SplitButton.prototype.setMenu=function(M,o){var t=this;this._oMenuButton.setMenu(M);if(e(M,o)&&o.getVisible()){this._oMenuItem=o;}else{if(M&&M.getItems()){var f=M.getItems()[0];if(f&&f.getVisible()){this._oMenuItem=f;}else{this._oMenuItem=null;}}}if(this._oMenuItem){if(!this.getText()){this._oDefaultActionButton.setText(this._oMenuItem.getText()||null);}if(!this.getIcon()){this._oDefaultActionButton.setIcon(this._oMenuItem.getIcon()||null);}if(this.getEnabled()){this._oDefaultActionButton.setEnabled(this._oMenuItem.getEnabled());}this._oDefaultActionButton.setTooltip(this._oMenuItem.getTooltip()||null);this._oMenuItem.setTooltip=b(t);this._oMenuItem.setText=c(t);this._oMenuItem.setIcon=a(t);this._oMenuItem.setEnabled=d(t);this._oMenuItem.setVisible=m(t);}return this;};sap.suite.ui.commons.SplitButton.prototype.getMenu=function(){return this._oMenuButton.getMenu();};sap.suite.ui.commons.SplitButton.prototype.destroyMenu=function(){this._oMenuButton.destroyMenu();return this;};sap.suite.ui.commons.SplitButton.prototype.setEnabled=function(E){this._oDefaultActionButton.setEnabled(E);this._oMenuButton.setEnabled(E);this.setProperty("enabled",E);};sap.suite.ui.commons.SplitButton.prototype.setLite=function(l){this._oDefaultActionButton.setLite(l);this._oMenuButton.setLite(l);this.setProperty("lite",l);};sap.suite.ui.commons.SplitButton.prototype.setStyle=function(s){this._oDefaultActionButton.setStyle(s);this._oMenuButton.setStyle(s);this.setProperty("style",s);};sap.suite.ui.commons.SplitButton.prototype.setStyled=function(s){this._oDefaultActionButton.setStyled(s);this._oMenuButton.setStyled(s);this.setProperty("styled",s);};sap.suite.ui.commons.SplitButton.prototype.setIconFirst=function(i){this._oDefaultActionButton.setIconFirst(i);this.setProperty("iconFirst",i);};sap.suite.ui.commons.SplitButton.prototype.setIcon=function(i){this._oDefaultActionButton.setIcon(i);this.setProperty("icon",i);};sap.suite.ui.commons.SplitButton.prototype.setText=function(t){this._oDefaultActionButton.setText(t);this.setProperty("text",t);};}());
